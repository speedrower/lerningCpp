#include <iostream>

using namespace std;

// Function declarations
double add(double a, double b);
double subtract(double a, double b);
double multiply(double a, double b);
double divide(double a, double b);
double power(double a, int b);

int main(){
    cout << "-------------------------------------" << endl;
    cout << "|        Calculator v 1.0           |" << endl;
    cout << "|            Filip Bak               |" << endl;
    cout << "-------------------------------------" << endl;

    char cont = 't';

    while (cont == 't' || cont == 'T'){
        double a, b_double;
        int b_int;
        char operation;

        cout << "Enter the first number: ";
        cin >> a;

        cout << "Which operation would you like to perform?" << endl;
        cout << "+  Addition" << endl;
        cout << "-  Subtraction" << endl;
        cout << "*  Multiplication" << endl;
        cout << "/  Division" << endl;
        cout << "^  Power (integer exponent)" << endl;

        cin >> operation;

        // Input for second number
        if (operation == '^') {
            cout << "Enter the exponent (integer): ";
            cin >> b_int; // if user enters 2.7, it will be truncated to 2
        } else {
            cout << "Enter the second number: ";
            cin >> b_double;
        }

        // Perform operation
        switch (operation){
            case '+':
                cout << a << " + " << b_double << " = " << add(a, b_double) << endl;
                break;
            case '-':
                cout << a << " - " << b_double << " = " << subtract(a, b_double) << endl;
                break;
            case '*':
                cout << a << " * " << b_double << " = " << multiply(a, b_double) << endl;
                break;
            case '/':
                cout << a << " / " << b_double << " = " << divide(a, b_double) << endl;
                break;
            case '^':
                cout << a << " ^ " << b_int << " = " << power(a, b_int) << endl;
                break;
            default:
                cout << "Unknown operation!" << endl;
        }

        cout << "Do you want to continue? (t/n): ";
        cin >> cont;
    }

    cout << "Thank you for using the calculator. Goodbye!" << endl;

    return 0;
}

// Function definitions
double add(double a, double b) { return a + b; }
double subtract(double a, double b) { return a - b; }
double multiply(double a, double b) { return a * b; }

double divide(double a, double b) 
{
    if (b == 0)
    {
        cout << "Error: Division by zero!" << endl;
        return 0;
    }
    return a / b;
}

double power(double a, int b)
{
    double result = 1;

    if (b < 0)
    {
        a = 1 / a;
        b = -b;
    }

    while (b-- > 0)
        result *= a;

    return result;
}
