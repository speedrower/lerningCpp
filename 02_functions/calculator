#include <iostream>

// Function declarations
double add(double a, double b);
double subtract(double a, double b);
double multiply(double a, double b);
double divide(double a, double b);
double power(double a, int b);

int main(){
    std::cout << "-------------------------------------" << std::endl;
    std::cout << "|        Calculator v 1.0           |" << std::endl;
    std::cout << "|            Filip Bak               |" << std::endl;
    std::cout << "-------------------------------------" << std::endl;

    char cont = 't';

    while (cont == 't' || cont == 'T'){
        double a, b_double;
        int b_int;
        char operation;

        std::cout << "Enter the first number: ";
        std::cin >> a;

        std::cout << "Which operation would you like to perform?" << std::endl;
        std::cout << "+  Addition" << std::endl;
        std::cout << "-  Subtraction" << std::endl;
        std::cout << "*  Multiplication" << std::endl;
        std::cout << "/  Division" << std::endl;
        std::cout << "^  Power (integer exponent)" << std::endl;

        std::cin >> operation;

        // Input for second number
        if (operation == '^') {
            std::cout << "Enter the exponent (integer): ";
            std::cin >> b_int; // if user enters 2.7, it will be truncated to 2
        } else {
            std::cout << "Enter the second number: ";
            std::cin >> b_double;
        }

        // Perform operation
        switch (operation){
            case '+':
                std::cout << a << " + " << b_double << " = " << add(a, b_double) << std::endl;
                break;
            case '-':
                std::cout << a << " - " << b_double << " = " << subtract(a, b_double) << std::endl;
                break;
            case '*':
                std::cout << a << " * " << b_double << " = " << multiply(a, b_double) << std::endl;
                break;
            case '/':
                std::cout << a << " / " << b_double << " = " << divide(a, b_double) << std::endl;
                break;
            case '^':
                std::cout << a << " ^ " << b_int << " = " << power(a, b_int) << std::endl;
                break;
            default:
                std::cout << "Unknown operation!" << std::endl;
        }

        std::cout << "Do you want to continue? (t/n): ";
        std::cin >> cont;
    }

    std::cout << "Thank you for using the calculator. Goodbye!" << std::endl;

    return 0;
}

// Function definitions
double add(double a, double b) { return a + b; }
double subtract(double a, double b) { return a - b; }
double multiply(double a, double b) { return a * b; }

double divide(double a, double b) 
{
    if (b == 0)
    {
        std::cout << "Error: Division by zero!" << std::endl;
        return 0;
    }
    return a / b;
}

double power(double a, int b)
{
    double result = 1;

    if (b < 0)
    {
        a = 1 / a;
        b = -b;
    }

    while (b-- > 0)
        result *= a;

    return result;
}
